## 使用 requests 实现步骤

1. 安装`requests`。
2. 打开登陆页面，将验证码存储为png图片；同时获取登陆页的`cookie`，此`cookie`将在后续步骤中一直使用。
3. 手动输入验证，创建登陆`session`，使用之前获取的`cookie`将账号密码一同POST到登陆链接。通过返回内容关键字验证，确认登陆成功。（在该案例中，如登陆成功，会在返回头部中出现特定的`refresh`字段）
4. 进入到订单页，通过返回文本中的关键字判定获取成功。
5. 获取订单的链接为`ajax`，返回一段`json`代码，解析代码可获得订单编号`SEQ`。每次确认订单前，需要获取新的`SEQ`。
6. 使用`SEQ`和之前的`cookies`可以直接尝试提交订单，如果有余量，会提交成功。目前还未发现体检成功的有效反馈，暂时通过提交成功后的跳转页面内容进行判定。





## 使用 selenium 实现步骤

该方法虽然可以成功，但是整体效率较为低下，故测试成功后暂无后续优化过程。

1. 安装`selenium`
    pip install selenium
2. 安装`chromedriver`，并复制文件到`/usr/local/bin`目录下。
3. 模拟登陆，使用`raw_input`手动输入验证码。
4. 访问目标页面，通过订单按钮文本等待状态出现。
6. 点击订单按钮后，可获取最终确认的“立刻获取”按钮，完成点击。
7. 发现点击订单按钮后，需要一小段时间延迟才能生成序列号和提交按钮，延迟后点击提交按钮，可成功完成下单。


## To-do

* 修改检测按钮文本状态的判断
* 异常处理
* 修改验证码处理方式
* 使用`request`的方式提交，摆脱图形化



## 参考

* https://cuiqingcai.com/2599.html
* https://sites.google.com/a/chromium.org/chromedriver/downloads
